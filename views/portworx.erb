<%def money(num)
  "$#{num.gsub(/\d(?=(...)+$)/, '\0,')}"
end
%>
<form action="/portworx-precio" method="get">
<div class="container">
<!--CLUSTER IKS/OCP-->
  <div class="row">
    <div class="col-md-6">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Clúster 1 IKS/OCP</h5>
        </div>
        <div class="ibox-content">
          <h5>NOTAS:*Los precios lista que se presentarán son calculados y pueden variar respecto a los presentados en IBM Cloud en +-1%</h5>
            <table class="table table-stripped">
              <thead>
                <tr>
                  <th>Parámetro</th>
                  <th>Valor</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Tipo de Clúster</td>
                  <td>
                    <select name="cluster_type_1" id="cluster_type_1">
                      <option value="iks">Kubernetes</option>
                      <option value="ocp">Openshift</option>
                  </td>
                </tr>
                <tr>
                  <td>Worker Nodes</td>
                  <td>
                    <label for="wn_1"><input type="number" id="wn_1" name="wn_1" value="3" disabled>
                    </td>
                  </tr>
                  <tr>
                    <td>Tipo de infraestructura</td>
                    <td>
                      <select name="infra_type_1" id="infra_type_1">
                        <option value="dedicated">Dedicado</option>
                        <option value="shared">Compartido</option>
                        <option value="bm">Bare Metal</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td>Flavor</td>
                    <td>
                      <select name="flavor_1" id="flavor_1">
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td>Región</td>
                    <td>
                      <select name="region_cluster_1" id="region_cluster_1">
                        <option value="mexico">México</option>
                        <option value="dallas">Dallas</option>
                      </select>
                    </td>
                  </tr>
                </tbody>
              </table>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Clúster 2 IKS/OCP</h5>
        </div>
        <div class="ibox-content">
          <h5>NOTAS:*Los precios lista que se presentarán son calculados y pueden variar respecto a los presentados en IBM Cloud en +-1%</h5>
            <table class="table table-stripped">
              <thead>
                <tr>
                  <th>Parámetro</th>
                  <th>Valor</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Tipo de Clúster</td>
                  <td>
                    <select name="cluster_type_2" id="cluster_type_2">
                      <option value="iks">Kubernetes</option>
                      <option value="ocp">Openshift</option>
                  </td>
                </tr>
                <tr>
                  <td>Worker Nodes</td>
                  <td>
                    <label for="wn_2"><input type="number" id="wn_2" name="wn_2" value="3" disabled>
                    </td>
                  </tr>
                  <tr>
                    <td>Tipo de infraestructura</td>
                    <td>
                      <select name="infra_type_2" id="infra_type_2">
                        <option value="dedicated">Dedicado</option>
                        <option value="shared">Compartido</option>
                        <option value="bm">Bare Metal</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td>Flavor</td>
                    <td>
                      <select name="flavor_2" id="flavor_2">
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td>Región</td>
                    <td>
                      <select name="region_cluster_2" id="region_cluster_2">
                        <option value="mexico">México</option>
                        <option value="dallas">Dallas</option>
                      </select>
                    </td>
                  </tr>
                </tbody>
              </table>
        </div>
      </div>
    </div>
</div>

<!--BLOCK STORAGE-->
<div class="row">

    <div class="col-md-6">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Clúster 1 Block Storage</h5>
        </div>
        <div class="ibox-content">
          <h5>NOTAS:*Los precios lista que se presentarán son calculados y pueden variar respecto a los presentados en IBM Cloud en +-1%</h5>
            <table class="table table-stripped">
              <thead>
                <tr>
                  <th>Parámetro</th>
                  <th>Valor</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Storage GB</td>
                  <td>
                    <label for="storage_block"><input type="number" id="storage_block" name="storage_block">
                    </td>
                  </tr>
                  <tr>
                    <td>IOPS</td>
                    <td>
                      <select name="iops_1" id="iops_1">
                        <option value=".25">0.25 IOPS/GB</option>
                        <option value="2">2 IOPS/GB</option>
                        <option value="4">4 IOPS/GB</option>
                        <option value="10">10 IOPS/GB</option>
                      </select>
                    </td>
                  </tr>
                </tbody>
              </table>
        </div>
      </div>
    </div>

<!--DATABASE FOR ETCD-->
    <div class="col-md-6">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Clúster 1 DB for ETCD</h5>
        </div>
        <div class="ibox-content">
          <h5>NOTAS:*Los precios lista que se presentarán son calculados y pueden variar respecto a los presentados en IBM Cloud en +-1%</h5>
            <table class="table table-stripped">
              <thead>
                <tr>
                  <th>Parámetro</th>
                  <th>Valor</th>
                </tr>
              </thead>
              <tbody>
                  <tr>
                    <td>Ram GB</td>
                    <td>
                    <label for="ram_etcd"><input type="number" id="ram_etcd" name="ram_etcd" value="8" disabled>
                    </td>
                  </tr>
                  <tr>
                    <td>Storage GB</td>
                    <td>
                    <label for="storage_etcd"><input type="number" id="storage_etcd" name="storage_etcd" value="128" disabled>
                    </td>
                  </tr>
                  <tr>
                    <td>Cores</td>
                    <td>
                    <label for="cores"><input type="number" id="cores" name="cores" value="3" disabled> 
                    </td>
                  </tr>
                </tbody>
              </table>
        </div>
      </div>
    </div>

</div>

<button type="submit" class="btn btn-outline btn-primary">Quiero mi dimensionamiento</button>
</form>

<!--%=respuesta_1%-->
<% if (respuesta_1 != nil and respuesta_1.size>0) then%>
      <div class="row">
        <div class="col-sm-12">
          <div class="ibox float-e-margins">
            <div class="ibox-title">
              <h5>Dimensionamiento de portworx</h5>
            </div>
            <div class="ibox-content">
              <table class="table table-stripped">
                <thead>
                  <tr>
                    <th>Precio Total Mensual (USD)</th>
                  </tr>
                </thead>
                <tbody>
                  <% respuesta_1.each do |json| %>
                    <tr>
                      <td><%= json["cluster"] %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
<% end %>

<!--%=respuesta_2%-->
<% if (respuesta_2 != nil and respuesta_2.size>0) then%>
      <div class="row">
        <div class="col-sm-22">
          <div class="ibox float-e-margins">
            <div class="ibox-title">
              <h5>Dimensionamiento de portworx</h5>
            </div>
            <div class="ibox-content">
              <table class="table table-stripped">
                <thead>
                  <tr>
                    <th>Precio Total Mensual (USD)</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                      <td><%= respuesta_2 %></td>
                    </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
<% end %>

  <div class="row">
    <div class="col-12 text-center">
      <form action="/menu" method="get">
        <button type="submit" class="btn btn-outline btn-primary">Regresar</button>
      </form>
    </div>
  </div>
  <script>
    $(document).ready(function () {
      $("#infra_type_1").change(function () {
          var val = $(this).val();
          if (val == "shared" || val == "dedicated") {
              $("#flavor_1").html("<option value='16x64'>16x64</option>");
          } else {
              $("#flavor_1").html("<option value='mb4c.20x64'>mb4c.20x64</option>");
          }
      });

      $("#infra_type_2").change(function () {
          var val = $(this).val();
          if (val == "shared" || val == "dedicated") {
              $("#flavor_2").html("<option value='16x64'>16x64</option>");
          } else {
              $("#flavor_2").html("<option value='mb4c.20x64'>mb4c.20x64</option>");
          }
      });

    });
  </script>
